"use strict";(self.webpackChunkmachnet_page=self.webpackChunkmachnet_page||[]).push([[410],{9946:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>i,default:()=>j,frontMatter:()=>c,metadata:()=>r,toc:()=>x});const r=JSON.parse('{"id":"performance_report","title":"Machnet Performance Report","description":"Important note: The performance results should be compared across platforms,","source":"@site/docs/performance_report.md","sourceDirName":".","slug":"/performance_report","permalink":"/machnet-docs/docs/performance_report","draft":false,"unlisted":false,"editUrl":"https://github.com/sarsanaee/machnet-docs/tree/main/docs/performance_report.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_label":"Machnet: Performance Report","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Machnet: Baby Steps","permalink":"/machnet-docs/docs/tutorial-basics/machnet-intro"},"next":{"title":"Machnet: Open source contribution","permalink":"/machnet-docs/docs/tutorial-contributing"}}');var n=t(4848),d=t(8453);const c={sidebar_label:"Machnet: Performance Report",sidebar_position:3},i="Machnet Performance Report",l={},x=[{value:"Single-connection request-response benchmark",id:"single-connection-request-response-benchmark",level:3}];function h(e){const s={code:"code",em:"em",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"machnet-performance-report",children:"Machnet Performance Report"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Important note: The performance results should be compared across platforms,\nsince the intra-platform variability (e.g., different pairs of VMs in the same\ncloud) is high."})}),"\n",(0,n.jsx)(s.h3,{id:"single-connection-request-response-benchmark",children:"Single-connection request-response benchmark"}),"\n",(0,n.jsx)(s.p,{children:"Description: A client sends a request to a server, and the server sends a\nresponse back to the client. The client keeps a configurable number messages in\nflight for pipelining."}),"\n",(0,n.jsx)(s.p,{children:"Start the Machnet Docker container on both client and server"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"# Server\n./machnet.sh --mac <server_DPDK_MAC> --ip <server_DPDK_IP>\n\n# Client\n./machnet.sh --mac <client_DPDK_MAC> --ip <client_DPDK_IP>\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Run the ",(0,n.jsx)(s.code,{children:"msg_gen"})," benchmark:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'MSG_GEN="docker run -v /var/run/machnet:/var/run/machnet ghcr.io/microsoft/machnet/machnet:latest release_build/src/apps/msg_gen/msg_gen"\n\n# Server\n${MSG_GEN} --local_ip <server_DPDK_IP> --msg_size 1024\n\n# Client: Experiment E1: latency\n${MSG_GEN} --local_ip <client DPDK IP> --remote_ip <server DPDK IP> --msg_window 1 --tx_msg_size 1024\n\n# Client: Experiment E2: message rate\n${MSG_GEN} --local_ip <client DPDK IP> --remote_ip <server DPDK IP> --msg_window 32 --tx_msg_size 1024\n'})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Server"}),(0,n.jsx)(s.th,{children:"NIC, DPDK PMD"}),(0,n.jsx)(s.th,{children:"Round-trip p50 99 99.9"}),(0,n.jsx)(s.th,{children:"RPCs/s"}),(0,n.jsx)(s.th,{children:"Notes"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Azure F8s_v2"}),(0,n.jsx)(s.td,{children:"CX4-Lx, netvsc"}),(0,n.jsx)(s.td,{children:"E1: 18 us, 19 us, 25 us"}),(0,n.jsx)(s.td,{children:"54K"}),(0,n.jsx)(s.td,{children:"No proximity groups"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.em,{children:"Ubuntu 22.03"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:"E2: 41 us, 54 us, 61 us"}),(0,n.jsx)(s.td,{children:"753K"}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"AWS c5.xlarge"}),(0,n.jsx)(s.td,{children:"ENA, ena"}),(0,n.jsx)(s.td,{children:"E1: 42 us, 66 us, 105 us"}),(0,n.jsx)(s.td,{children:"22K"}),(0,n.jsx)(s.td,{children:"Proximity groups"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.em,{children:"Amazon Linux"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:"E2: 61 us, 132 us, 209 us"}),(0,n.jsx)(s.td,{children:"122K"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--msg_window 8"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"GCP XXX, XXX"}),(0,n.jsx)(s.td,{children:"gVNIC"}),(0,n.jsx)(s.td,{children:"E1: XXX"}),(0,n.jsx)(s.td,{children:"XXX"}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.em,{children:"XXX"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:"E2: XXX"}),(0,n.jsx)(s.td,{children:"XXX"}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Bare metal"}),(0,n.jsx)(s.td,{children:"E810 PF, ice"}),(0,n.jsx)(s.td,{children:"E1: 18 us, 21 us, 22 us"}),(0,n.jsx)(s.td,{children:"55K"}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.em,{children:"Mariner 2.0"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:"E2: 30 us, 33 us, 37 us"}),(0,n.jsx)(s.td,{children:"1043K"}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Bare metal"}),(0,n.jsx)(s.td,{children:"E810 VF, iavf"}),(0,n.jsx)(s.td,{children:"E1: 18 us, 22 us, 22 us"}),(0,n.jsx)(s.td,{children:"55K"}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.em,{children:"Mariner 2.0"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:"E2: 31 us, 35 us, 41 us"}),(0,n.jsx)(s.td,{children:"1003K"}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Bare metal"}),(0,n.jsx)(s.td,{children:"Bluefield-2, mlx5"}),(0,n.jsx)(s.td,{children:"E1: 9 us, 12 us, 13 us"}),(0,n.jsx)(s.td,{children:"99K"}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.em,{children:"Ubuntu 22.04"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:"E2: 24 us, 26 us, 28 us"}),(0,n.jsx)(s.td,{children:"1320K"}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Bare metal j"}),(0,n.jsx)(s.td,{children:"CX5, mlx5"}),(0,n.jsx)(s.td,{children:"E1: XXX"}),(0,n.jsx)(s.td,{children:"XXX"}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.em,{children:"Ubuntu 20.04"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:"E2: XXX"}),(0,n.jsx)(s.td,{children:"XXX"}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Bare metal"}),(0,n.jsx)(s.td,{children:"CX6-Dx, mlx5"}),(0,n.jsx)(s.td,{children:"E1: XXX"}),(0,n.jsx)(s.td,{children:"XXX"}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.em,{children:"Ubuntu 20.04"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:"E2: XXX"}),(0,n.jsx)(s.td,{children:"XXX"}),(0,n.jsx)(s.td,{})]})]})]})]})}function j(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>c,x:()=>i});var r=t(6540);const n={},d=r.createContext(n);function c(e){const s=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),r.createElement(d.Provider,{value:s},e.children)}}}]);